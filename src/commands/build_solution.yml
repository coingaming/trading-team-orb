description: >
  Builds target solution
parameters:
  solution_path:
    type: string
  is_lambda:
    type: boolean
    default: false
steps:
  - run:
      name: "Building solution"
      command: |
        dotnet build <<parameters.solution_path>>

        if [ "<<parameters.is_lambda>>" = "true" ]; then
          dotnet publish <<parameters.solution_path>> -c Release -o app/out --self-contained true /p:GenerateRuntimeConfigurationFiles=true --runtime linux-x64
        else
          dotnet publish <<parameters.solution_path>> -c Release -o app/out
        fi

        rm -rf build
